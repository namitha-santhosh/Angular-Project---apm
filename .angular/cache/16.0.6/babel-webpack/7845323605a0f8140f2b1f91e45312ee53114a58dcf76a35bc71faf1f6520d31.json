{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ViewCartComponent = class ViewCartComponent {\n  constructor(http, authService, router, cartService) {\n    this.http = http;\n    this.authService = authService;\n    this.router = router;\n    this.cartService = cartService;\n    //products: Product[] = [];\n    this.cartItems = [];\n  }\n  ngOnInit() {\n    this.fetchCartData();\n  }\n  fetchCartData() {\n    this.cartService.fetchCartData().subscribe(data => {\n      this.username = data.username;\n      //this.products = data.products;\n      this.cartItems = data.cartItems;\n    });\n  }\n  removeProduct(productId) {\n    this.cartService.removeProduct(productId).subscribe(() => {\n      alert('Product removed from cart.');\n      this.fetchCartData();\n    }, error => {\n      console.error('Error removing product:', error);\n      alert(\"Something went wrong\");\n    });\n  }\n  fetchImage(imageUrl) {\n    this.http.get(imageUrl, {\n      responseType: 'blob'\n    }).subscribe(response => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageElement = document.getElementById('productImage');\n        imageElement.src = reader.result;\n      };\n      reader.readAsDataURL(response);\n    });\n  }\n  onBack() {\n    this.router.navigate(['/products']);\n  }\n};\nViewCartComponent = __decorate([Component({\n  selector: 'app-view-cart',\n  templateUrl: './viewcart.component.html',\n  styleUrls: ['./viewcart.component.css']\n})], ViewCartComponent);\nexport { ViewCartComponent };","map":{"version":3,"names":["Component","ViewCartComponent","constructor","http","authService","router","cartService","cartItems","ngOnInit","fetchCartData","subscribe","data","username","removeProduct","productId","alert","error","console","fetchImage","imageUrl","get","responseType","response","reader","FileReader","onloadend","imageElement","document","getElementById","src","result","readAsDataURL","onBack","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\viewcart\\viewcart.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\nimport { CartService } from '../products/CartService';\n\ninterface CartItem {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n  imageUrl: string;\n  quantity: number;\n}\n\n@Component({\n  selector: 'app-view-cart',\n  templateUrl: './viewcart.component.html',\n  styleUrls: ['./viewcart.component.css']\n})\nexport class ViewCartComponent implements OnInit {\n  username: string | undefined;\n  //products: Product[] = [];\n  cartItems: CartItem[] = [];\n\n  constructor(private http: HttpClient, private authService:AuthService, private router: Router, private cartService: CartService) {}\n\n  ngOnInit(): void {\n    this.fetchCartData();\n  }\n\n\n  fetchCartData() {\n    this.cartService.fetchCartData().subscribe((data: { username: string | undefined; cartItems: CartItem[]; }) => {\n      this.username = data.username;\n      //this.products = data.products;\n      this.cartItems = data.cartItems;\n    });\n  }\n\n\n  removeProduct(productId: number) {\n  \n    this.cartService.removeProduct(productId).subscribe(\n      () => {\n        alert('Product removed from cart.');\n        this.fetchCartData();\n      },\n      (error) => {\n        console.error('Error removing product:', error);\n        alert(\"Something went wrong\");\n      }\n    );\n  }\n\n  \n  \n  \n  fetchImage(imageUrl: string): void {\n    this.http.get(imageUrl, { responseType: 'blob' }).subscribe(response => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageElement = document.getElementById('productImage') as HTMLImageElement;\n        imageElement.src = reader.result as string;\n      };\n      reader.readAsDataURL(response);\n    });\n  }\n\n  onBack(): void {\n    this.router.navigate(['/products']);\n  }\n  \n}\n\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AAoBjD,IAAaC,iBAAiB,GAA9B,MAAaA,iBAAiB;EAK5BC,YAAoBC,IAAgB,EAAUC,WAAuB,EAAUC,MAAc,EAAUC,WAAwB;IAA3G,KAAAH,IAAI,GAAJA,IAAI;IAAsB,KAAAC,WAAW,GAAXA,WAAW;IAAsB,KAAAC,MAAM,GAANA,MAAM;IAAkB,KAAAC,WAAW,GAAXA,WAAW;IAHlH;IACA,KAAAC,SAAS,GAAe,EAAE;EAEwG;EAElIC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAGAA,aAAaA,CAAA;IACX,IAAI,CAACH,WAAW,CAACG,aAAa,EAAE,CAACC,SAAS,CAAEC,IAA8D,IAAI;MAC5G,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAACC,QAAQ;MAC7B;MACA,IAAI,CAACL,SAAS,GAAGI,IAAI,CAACJ,SAAS;IACjC,CAAC,CAAC;EACJ;EAGAM,aAAaA,CAACC,SAAiB;IAE7B,IAAI,CAACR,WAAW,CAACO,aAAa,CAACC,SAAS,CAAC,CAACJ,SAAS,CACjD,MAAK;MACHK,KAAK,CAAC,4BAA4B,CAAC;MACnC,IAAI,CAACN,aAAa,EAAE;IACtB,CAAC,EACAO,KAAK,IAAI;MACRC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CD,KAAK,CAAC,sBAAsB,CAAC;IAC/B,CAAC,CACF;EACH;EAKAG,UAAUA,CAACC,QAAgB;IACzB,IAAI,CAAChB,IAAI,CAACiB,GAAG,CAACD,QAAQ,EAAE;MAAEE,YAAY,EAAE;IAAM,CAAE,CAAC,CAACX,SAAS,CAACY,QAAQ,IAAG;MACrE,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,SAAS,GAAG,MAAK;QACtB,MAAMC,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAqB;QAChFF,YAAY,CAACG,GAAG,GAAGN,MAAM,CAACO,MAAgB;MAC5C,CAAC;MACDP,MAAM,CAACQ,aAAa,CAACT,QAAQ,CAAC;IAChC,CAAC,CAAC;EACJ;EAEAU,MAAMA,CAAA;IACJ,IAAI,CAAC3B,MAAM,CAAC4B,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;EACrC;CAED;AArDYhC,iBAAiB,GAAAiC,UAAA,EAL7BlC,SAAS,CAAC;EACTmC,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,C,EACWpC,iBAAiB,CAqD7B;SArDYA,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}