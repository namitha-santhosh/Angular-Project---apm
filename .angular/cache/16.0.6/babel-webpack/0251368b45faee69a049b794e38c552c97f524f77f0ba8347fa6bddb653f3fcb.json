{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChildren, ElementRef } from '@angular/core';\nimport { FormControl, Validators, FormControlName } from '@angular/forms';\nimport { fromEvent, merge } from 'rxjs';\nimport { debounceTime } from 'rxjs/operators';\nimport { NumberValidators } from '../shared/number.validator';\nimport { GenericValidator } from '../shared/generic-validator';\nimport { HttpHeaders } from '@angular/common/http';\nlet ProductEditComponent = class ProductEditComponent {\n  get tags() {\n    return this.productForm.get('tags');\n  }\n  constructor(fb, route, router, productService, authService, http) {\n    this.fb = fb;\n    this.route = route;\n    this.router = router;\n    this.productService = productService;\n    this.authService = authService;\n    this.http = http;\n    this.pageTitle = 'Product Edit';\n    this.errorMessage = '';\n    this.selectedImageFile = null;\n    // Use with the generic validation message class\n    this.displayMessage = {};\n    // Add a property to store the selected category\n    this.selectedCategoryId = null;\n    // Defines all of the validation messages for the form.\n    // These could instead be retrieved from a file or database.\n    this.validationMessages = {\n      productName: {\n        required: 'Product name is required.',\n        minlength: 'Product name must be at least three characters.',\n        maxlength: 'Product name cannot exceed 50 characters.'\n      },\n      productCode: {\n        required: 'Product code is required.'\n      },\n      starRating: {\n        range: 'Rate the product between 1 (lowest) and 5 (highest).'\n      }\n    };\n    // Define an instance of the validator for use with this form,\n    // passing in this form's set of validation messages.\n    this.genericValidator = new GenericValidator(this.validationMessages);\n  }\n  ngOnInit() {\n    this.productForm = this.fb.group({\n      productName: ['', [Validators.required, Validators.minLength(3), Validators.maxLength(50)]],\n      productCode: ['', Validators.required],\n      starRating: ['', NumberValidators.range(1, 5)],\n      releaseDate: [''],\n      price: [''],\n      imageFile: [],\n      //imageUrl: [''],\n      tags: this.fb.array([]),\n      description: ''\n    });\n    // Read the product Id from the route parameter\n    this.sub = this.route.paramMap.subscribe(params => {\n      const id = Number(this.route.snapshot.paramMap.get('id'));\n      this.getProduct(id);\n    });\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  ngAfterViewInit() {\n    // Watch for the blur event from any input element on the form.\n    // This is required because the valueChanges does not provide notification on blur\n    const controlBlurs = this.formInputElements.map(formControl => fromEvent(formControl.nativeElement, 'blur'));\n    // Merge the blur event observable with the valueChanges observable\n    // so we only need to subscribe once.\n    merge(this.productForm.valueChanges, ...controlBlurs).pipe(debounceTime(800)).subscribe(value => {\n      this.displayMessage = this.genericValidator.processMessages(this.productForm);\n    });\n  }\n  addTag() {\n    this.tags.push(new FormControl());\n  }\n  deleteTag(index) {\n    this.tags.removeAt(index);\n    this.tags.markAsDirty();\n  }\n  getProduct(id) {\n    console.log(id);\n    this.productService.getProduct(id).subscribe({\n      next: product => this.displayProduct(product),\n      error: err => this.errorMessage = err\n    });\n  }\n  displayProduct(product) {\n    if (this.productForm) {\n      this.productForm.reset();\n    }\n    this.product = product;\n    if (this.product.id === 0) {\n      this.pageTitle = 'Add Product';\n    } else {\n      this.pageTitle = `Edit Product: ${this.product.productName}`;\n    }\n    // Update the data on the form\n    this.productForm.patchValue({\n      productName: this.product.productName,\n      productCode: this.product.productCode,\n      starRating: this.product.starRating,\n      releaseDate: this.product.releaseDate,\n      price: this.product.price,\n      imageUrl: this.product.imageUrl,\n      description: this.product.description\n    });\n    this.productForm.setControl('tags', this.fb.array(this.product.tags || []));\n  }\n  deleteProduct() {\n    if (this.product.id === 0) {\n      // Don't delete, it was never saved.\n      this.onSaveComplete();\n    } else if (this.product.id) {\n      if (confirm(`Really delete the product: ${this.product.productName}?`)) {\n        this.productService.deleteProduct(this.product.id).subscribe({\n          next: () => this.onSaveComplete(),\n          error: err => this.errorMessage = err\n        });\n      }\n    }\n  }\n  onImageChange(event) {\n    const file = event.target.files[0];\n    this.selectedImageFile = file;\n  }\n  // Fetch categories from your API (replace with your actual API endpoint)\n  fetchCategories() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.http.get('http://127.0.0.1:8000/api/category', {\n      headers\n    }).subscribe(data => {\n      this.categories = data;\n    });\n  }\n  saveProduct() {\n    if (this.productForm.valid && this.productForm.dirty) {\n      const productData = {\n        ...this.product,\n        ...this.productForm.value\n      };\n      console.log('Selected Image File:', this.selectedImageFile);\n      console.log('selected image name:', this.selectedImageFile?.name);\n      const formData = new FormData();\n      formData.append('productName', productData.productName);\n      formData.append('productCode', productData.productCode);\n      formData.append('starRating', productData.starRating.toString());\n      formData.append('description', productData.description);\n      formData.append('price', productData.price.toString());\n      formData.append('releaseDate', productData.releaseDate);\n      if (this.selectedImageFile) {\n        formData.append('image', this.selectedImageFile, this.selectedImageFile.name);\n      }\n      if (productData.id === 0) {\n        this.productService.createProductWithImage(formData).subscribe(response => {\n          console.log('Create Product Response:', response);\n          this.onSaveComplete();\n        }, error => {\n          console.error('Error creating product:', error);\n          this.errorMessage = 'Error creating product.';\n        });\n      } else if (this.selectedImageFile) {\n        // Update with image\n        this.productService.updateProductWithImage(productData.id, formData).subscribe(response => {\n          console.log('Update Product with Image Response:', response);\n          this.onSaveComplete();\n        }, error => {\n          console.error('Error updating product with image:', error);\n          this.errorMessage = 'Error updating product with image.';\n        });\n      } else {\n        // Update without image\n        this.productService.updateProduct(productData).subscribe(response => {\n          console.log('Update Product Response:', response);\n          this.onSaveComplete();\n        }, error => {\n          console.error('Error updating product:', error);\n          this.errorMessage = 'Error updating product.';\n        });\n      }\n    } else {\n      this.errorMessage = 'Please correct the validation errors.';\n    }\n  }\n  onSaveComplete() {\n    // Reset the form to clear the flags\n    this.productForm.reset();\n    this.router.navigate(['/products']);\n  }\n};\n__decorate([ViewChildren(FormControlName, {\n  read: ElementRef\n})], ProductEditComponent.prototype, \"formInputElements\", void 0);\nProductEditComponent = __decorate([Component({\n  templateUrl: './product-edit.component.html'\n})], ProductEditComponent);\nexport { ProductEditComponent };","map":{"version":3,"names":["Component","ViewChildren","ElementRef","FormControl","Validators","FormControlName","fromEvent","merge","debounceTime","NumberValidators","GenericValidator","HttpHeaders","ProductEditComponent","tags","productForm","get","constructor","fb","route","router","productService","authService","http","pageTitle","errorMessage","selectedImageFile","displayMessage","selectedCategoryId","validationMessages","productName","required","minlength","maxlength","productCode","starRating","range","genericValidator","ngOnInit","group","minLength","maxLength","releaseDate","price","imageFile","array","description","sub","paramMap","subscribe","params","id","Number","snapshot","getProduct","ngOnDestroy","unsubscribe","ngAfterViewInit","controlBlurs","formInputElements","map","formControl","nativeElement","valueChanges","pipe","value","processMessages","addTag","push","deleteTag","index","removeAt","markAsDirty","console","log","next","product","displayProduct","error","err","reset","patchValue","imageUrl","setControl","deleteProduct","onSaveComplete","confirm","onImageChange","event","file","target","files","fetchCategories","token","getToken","headers","set","data","categories","saveProduct","valid","dirty","productData","name","formData","FormData","append","toString","createProductWithImage","response","updateProductWithImage","updateProduct","navigate","__decorate","read","templateUrl"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\products\\product-edit.component.ts"],"sourcesContent":["import { Component, OnInit, AfterViewInit, OnDestroy, ViewChildren, ElementRef } from '@angular/core';\r\nimport { FormBuilder, FormGroup, FormControl, FormArray, Validators, FormControlName } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\nimport { Observable, Subscription, fromEvent, merge } from 'rxjs';\r\nimport { debounceTime } from 'rxjs/operators';\r\n\r\nimport { Product } from './product';\r\nimport { ProductService } from './product.service';\r\n\r\nimport { NumberValidators } from '../shared/number.validator';\r\nimport { GenericValidator } from '../shared/generic-validator';\r\nimport { HttpHeaders } from '@angular/common/http';\r\nimport { AuthService } from '../auth.service';\r\n\r\n@Component({\r\n  templateUrl: './product-edit.component.html'\r\n})\r\nexport class ProductEditComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChildren(FormControlName, { read: ElementRef }) formInputElements!: ElementRef[];\r\n  pageTitle = 'Product Edit';\r\n  errorMessage = '';\r\n  productForm!: FormGroup;\r\n\r\n  product!: Product;\r\n  private sub!: Subscription;\r\n\r\n  selectedImageFile: File | null = null;\r\n\r\n  // Use with the generic validation message class\r\n  displayMessage: { [key: string]: string } = {};\r\n  private validationMessages: { [key: string]: { [key: string]: string } };\r\n  private genericValidator: GenericValidator;\r\n\r\n  get tags(): FormArray {\r\n    return this.productForm.get('tags') as FormArray;\r\n  }\r\n\r\n  constructor(private fb: FormBuilder,\r\n              private route: ActivatedRoute,\r\n              private router: Router,\r\n              private productService: ProductService,\r\n              private authService: AuthService,\r\n              private http:\r\n              ) {\r\n\r\n    // Defines all of the validation messages for the form.\r\n    // These could instead be retrieved from a file or database.\r\n    this.validationMessages = {\r\n      productName: {\r\n        required: 'Product name is required.',\r\n        minlength: 'Product name must be at least three characters.',\r\n        maxlength: 'Product name cannot exceed 50 characters.'\r\n      },\r\n      productCode: {\r\n        required: 'Product code is required.'\r\n      },\r\n      starRating: {\r\n        range: 'Rate the product between 1 (lowest) and 5 (highest).'\r\n      }\r\n    };\r\n\r\n    // Define an instance of the validator for use with this form,\r\n    // passing in this form's set of validation messages.\r\n    this.genericValidator = new GenericValidator(this.validationMessages);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.productForm = this.fb.group({\r\n      productName: ['', [Validators.required,\r\n                         Validators.minLength(3),\r\n                         Validators.maxLength(50)]],\r\n      productCode: ['', Validators.required],\r\n      starRating: ['', NumberValidators.range(1, 5)],\r\n      releaseDate: [''],\r\n      price: [''],\r\n      imageFile: [],\r\n      //imageUrl: [''],\r\n      tags: this.fb.array([]),\r\n      description: ''\r\n    });\r\n\r\n    // Read the product Id from the route parameter\r\n    this.sub = this.route.paramMap.subscribe(\r\n      params => {\r\n        const id = Number(this.route.snapshot.paramMap.get('id'));\r\n        this.getProduct(id);\r\n      }\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.sub.unsubscribe();\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // Watch for the blur event from any input element on the form.\r\n    // This is required because the valueChanges does not provide notification on blur\r\n    const controlBlurs: Observable<any>[] = this.formInputElements\r\n      .map((formControl: ElementRef) => fromEvent(formControl.nativeElement, 'blur'));\r\n\r\n    // Merge the blur event observable with the valueChanges observable\r\n    // so we only need to subscribe once.\r\n    merge(this.productForm.valueChanges, ...controlBlurs).pipe(\r\n      debounceTime(800)\r\n    ).subscribe(value => {\r\n      this.displayMessage = this.genericValidator.processMessages(this.productForm);\r\n    });\r\n  }\r\n\r\n  addTag(): void {\r\n    this.tags.push(new FormControl());\r\n  }\r\n\r\n  deleteTag(index: number): void {\r\n    this.tags.removeAt(index);\r\n    this.tags.markAsDirty();\r\n  }\r\n\r\n  getProduct(id: number): void {\r\n    console.log(id)\r\n    this.productService.getProduct(id)\r\n      .subscribe({\r\n        next: (product: Product) => this.displayProduct(product),\r\n        error: err => this.errorMessage = err\r\n      });\r\n  }\r\n\r\n  displayProduct(product: Product): void {\r\n    if (this.productForm) {\r\n      this.productForm.reset();\r\n    }\r\n    this.product = product;\r\n\r\n    if (this.product.id === 0) {\r\n      this.pageTitle = 'Add Product';\r\n    } else {\r\n      this.pageTitle = `Edit Product: ${this.product.productName}`;\r\n    }\r\n\r\n    // Update the data on the form\r\n    this.productForm.patchValue({\r\n      productName: this.product.productName,\r\n      productCode: this.product.productCode,\r\n      starRating: this.product.starRating,\r\n      releaseDate: this.product.releaseDate,\r\n      price: this.product.price,\r\n      imageUrl: this.product.imageUrl,\r\n      description: this.product.description\r\n    });\r\n    this.productForm.setControl('tags', this.fb.array(this.product.tags || []));\r\n  }\r\n\r\n  deleteProduct(): void {\r\n    if (this.product.id === 0) {\r\n      // Don't delete, it was never saved.\r\n      this.onSaveComplete();\r\n    } else if (this.product.id) {\r\n      if (confirm(`Really delete the product: ${this.product.productName}?`)) {\r\n        this.productService.deleteProduct(this.product.id)\r\n          .subscribe({\r\n            next: () => this.onSaveComplete(),\r\n            error: err => this.errorMessage = err\r\n          });\r\n      }\r\n    }\r\n  }\r\n  \r\n  onImageChange(event: any): void {\r\n  const file = event.target.files[0];\r\n  this.selectedImageFile = file;\r\n  }\r\n\r\n  // Add a property to store the selected category\r\n  selectedCategoryId: number | null = null;\r\n\r\n  // Fetch categories from your API (replace with your actual API endpoint)\r\n  fetchCategories(): void {\r\n    const token = this.authService.getToken();\r\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\r\n    this.http.get('http://127.0.0.1:8000/api/category', { headers }).subscribe((data: any) => {\r\n      this.categories = data;\r\n    });\r\n  }\r\n\r\n\r\n\r\n  saveProduct(): void {\r\n    if (this.productForm.valid && this.productForm.dirty) {\r\n      const productData = { ...this.product, ...this.productForm.value };\r\n      console.log('Selected Image File:', this.selectedImageFile);\r\n      console.log('selected image name:', this.selectedImageFile?.name);\r\n      const formData = new FormData();\r\n      formData.append('productName', productData.productName);\r\n      formData.append('productCode', productData.productCode);\r\n      formData.append('starRating', productData.starRating.toString());\r\n      formData.append('description', productData.description);\r\n      formData.append('price', productData.price.toString());\r\n      formData.append('releaseDate', productData.releaseDate);\r\n  \r\n      if (this.selectedImageFile) {\r\n        formData.append('image', this.selectedImageFile, this.selectedImageFile.name);\r\n      }\r\n  \r\n      if (productData.id === 0) {\r\n        this.productService.createProductWithImage(formData)\r\n          .subscribe(\r\n            (response) => {\r\n              console.log('Create Product Response:', response);\r\n              this.onSaveComplete();\r\n            },\r\n            (error) => {\r\n              console.error('Error creating product:', error);\r\n              this.errorMessage = 'Error creating product.';\r\n            }\r\n          );\r\n      } else if (this.selectedImageFile) {\r\n        // Update with image\r\n        this.productService.updateProductWithImage(productData.id, formData)\r\n          .subscribe(\r\n            (response) => {\r\n              console.log('Update Product with Image Response:', response);\r\n              this.onSaveComplete();\r\n            },\r\n            (error) => {\r\n              console.error('Error updating product with image:', error);\r\n              this.errorMessage = 'Error updating product with image.';\r\n            }\r\n          );\r\n      } else {\r\n        // Update without image\r\n        this.productService.updateProduct(productData)\r\n          .subscribe(\r\n            (response) => {\r\n              console.log('Update Product Response:', response);\r\n              this.onSaveComplete();\r\n            },\r\n            (error) => {\r\n              console.error('Error updating product:', error);\r\n              this.errorMessage = 'Error updating product.';\r\n            }\r\n          );\r\n      }\r\n    } else {\r\n      this.errorMessage = 'Please correct the validation errors.';\r\n    }\r\n  }\r\n  \r\n  \r\n  \r\n\r\n  onSaveComplete(): void {\r\n    // Reset the form to clear the flags\r\n    this.productForm.reset();\r\n    this.router.navigate(['/products']);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n}\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAoCC,YAAY,EAAEC,UAAU,QAAQ,eAAe;AACrG,SAAiCC,WAAW,EAAaC,UAAU,EAAEC,eAAe,QAAQ,gBAAgB;AAG5G,SAAmCC,SAAS,EAAEC,KAAK,QAAQ,MAAM;AACjE,SAASC,YAAY,QAAQ,gBAAgB;AAK7C,SAASC,gBAAgB,QAAQ,4BAA4B;AAC7D,SAASC,gBAAgB,QAAQ,6BAA6B;AAC9D,SAASC,WAAW,QAAQ,sBAAsB;AAMlD,IAAaC,oBAAoB,GAAjC,MAAaA,oBAAoB;EAgB/B,IAAIC,IAAIA,CAAA;IACN,OAAO,IAAI,CAACC,WAAW,CAACC,GAAG,CAAC,MAAM,CAAc;EAClD;EAEAC,YAAoBC,EAAe,EACfC,KAAqB,EACrBC,MAAc,EACdC,cAA8B,EAC9BC,WAAwB,EACxBC,IAAK;IALL,KAAAL,EAAE,GAAFA,EAAE;IACF,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,cAAc,GAAdA,cAAc;IACd,KAAAC,WAAW,GAAXA,WAAW;IACX,KAAAC,IAAI,GAAJA,IAAI;IAvBxB,KAAAC,SAAS,GAAG,cAAc;IAC1B,KAAAC,YAAY,GAAG,EAAE;IAMjB,KAAAC,iBAAiB,GAAgB,IAAI;IAErC;IACA,KAAAC,cAAc,GAA8B,EAAE;IA+I9C;IACA,KAAAC,kBAAkB,GAAkB,IAAI;IAhItC;IACA;IACA,IAAI,CAACC,kBAAkB,GAAG;MACxBC,WAAW,EAAE;QACXC,QAAQ,EAAE,2BAA2B;QACrCC,SAAS,EAAE,iDAAiD;QAC5DC,SAAS,EAAE;OACZ;MACDC,WAAW,EAAE;QACXH,QAAQ,EAAE;OACX;MACDI,UAAU,EAAE;QACVC,KAAK,EAAE;;KAEV;IAED;IACA;IACA,IAAI,CAACC,gBAAgB,GAAG,IAAI1B,gBAAgB,CAAC,IAAI,CAACkB,kBAAkB,CAAC;EACvE;EAEAS,QAAQA,CAAA;IACN,IAAI,CAACvB,WAAW,GAAG,IAAI,CAACG,EAAE,CAACqB,KAAK,CAAC;MAC/BT,WAAW,EAAE,CAAC,EAAE,EAAE,CAACzB,UAAU,CAAC0B,QAAQ,EACnB1B,UAAU,CAACmC,SAAS,CAAC,CAAC,CAAC,EACvBnC,UAAU,CAACoC,SAAS,CAAC,EAAE,CAAC,CAAC,CAAC;MAC7CP,WAAW,EAAE,CAAC,EAAE,EAAE7B,UAAU,CAAC0B,QAAQ,CAAC;MACtCI,UAAU,EAAE,CAAC,EAAE,EAAEzB,gBAAgB,CAAC0B,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;MAC9CM,WAAW,EAAE,CAAC,EAAE,CAAC;MACjBC,KAAK,EAAE,CAAC,EAAE,CAAC;MACXC,SAAS,EAAE,EAAE;MACb;MACA9B,IAAI,EAAE,IAAI,CAACI,EAAE,CAAC2B,KAAK,CAAC,EAAE,CAAC;MACvBC,WAAW,EAAE;KACd,CAAC;IAEF;IACA,IAAI,CAACC,GAAG,GAAG,IAAI,CAAC5B,KAAK,CAAC6B,QAAQ,CAACC,SAAS,CACtCC,MAAM,IAAG;MACP,MAAMC,EAAE,GAAGC,MAAM,CAAC,IAAI,CAACjC,KAAK,CAACkC,QAAQ,CAACL,QAAQ,CAAChC,GAAG,CAAC,IAAI,CAAC,CAAC;MACzD,IAAI,CAACsC,UAAU,CAACH,EAAE,CAAC;IACrB,CAAC,CACF;EACH;EAEAI,WAAWA,CAAA;IACT,IAAI,CAACR,GAAG,CAACS,WAAW,EAAE;EACxB;EAEAC,eAAeA,CAAA;IACb;IACA;IACA,MAAMC,YAAY,GAAsB,IAAI,CAACC,iBAAiB,CAC3DC,GAAG,CAAEC,WAAuB,IAAKtD,SAAS,CAACsD,WAAW,CAACC,aAAa,EAAE,MAAM,CAAC,CAAC;IAEjF;IACA;IACAtD,KAAK,CAAC,IAAI,CAACO,WAAW,CAACgD,YAAY,EAAE,GAAGL,YAAY,CAAC,CAACM,IAAI,CACxDvD,YAAY,CAAC,GAAG,CAAC,CAClB,CAACwC,SAAS,CAACgB,KAAK,IAAG;MAClB,IAAI,CAACtC,cAAc,GAAG,IAAI,CAACU,gBAAgB,CAAC6B,eAAe,CAAC,IAAI,CAACnD,WAAW,CAAC;IAC/E,CAAC,CAAC;EACJ;EAEAoD,MAAMA,CAAA;IACJ,IAAI,CAACrD,IAAI,CAACsD,IAAI,CAAC,IAAIhE,WAAW,EAAE,CAAC;EACnC;EAEAiE,SAASA,CAACC,KAAa;IACrB,IAAI,CAACxD,IAAI,CAACyD,QAAQ,CAACD,KAAK,CAAC;IACzB,IAAI,CAACxD,IAAI,CAAC0D,WAAW,EAAE;EACzB;EAEAlB,UAAUA,CAACH,EAAU;IACnBsB,OAAO,CAACC,GAAG,CAACvB,EAAE,CAAC;IACf,IAAI,CAAC9B,cAAc,CAACiC,UAAU,CAACH,EAAE,CAAC,CAC/BF,SAAS,CAAC;MACT0B,IAAI,EAAGC,OAAgB,IAAK,IAAI,CAACC,cAAc,CAACD,OAAO,CAAC;MACxDE,KAAK,EAAEC,GAAG,IAAI,IAAI,CAACtD,YAAY,GAAGsD;KACnC,CAAC;EACN;EAEAF,cAAcA,CAACD,OAAgB;IAC7B,IAAI,IAAI,CAAC7D,WAAW,EAAE;MACpB,IAAI,CAACA,WAAW,CAACiE,KAAK,EAAE;;IAE1B,IAAI,CAACJ,OAAO,GAAGA,OAAO;IAEtB,IAAI,IAAI,CAACA,OAAO,CAACzB,EAAE,KAAK,CAAC,EAAE;MACzB,IAAI,CAAC3B,SAAS,GAAG,aAAa;KAC/B,MAAM;MACL,IAAI,CAACA,SAAS,GAAG,iBAAiB,IAAI,CAACoD,OAAO,CAAC9C,WAAW,EAAE;;IAG9D;IACA,IAAI,CAACf,WAAW,CAACkE,UAAU,CAAC;MAC1BnD,WAAW,EAAE,IAAI,CAAC8C,OAAO,CAAC9C,WAAW;MACrCI,WAAW,EAAE,IAAI,CAAC0C,OAAO,CAAC1C,WAAW;MACrCC,UAAU,EAAE,IAAI,CAACyC,OAAO,CAACzC,UAAU;MACnCO,WAAW,EAAE,IAAI,CAACkC,OAAO,CAAClC,WAAW;MACrCC,KAAK,EAAE,IAAI,CAACiC,OAAO,CAACjC,KAAK;MACzBuC,QAAQ,EAAE,IAAI,CAACN,OAAO,CAACM,QAAQ;MAC/BpC,WAAW,EAAE,IAAI,CAAC8B,OAAO,CAAC9B;KAC3B,CAAC;IACF,IAAI,CAAC/B,WAAW,CAACoE,UAAU,CAAC,MAAM,EAAE,IAAI,CAACjE,EAAE,CAAC2B,KAAK,CAAC,IAAI,CAAC+B,OAAO,CAAC9D,IAAI,IAAI,EAAE,CAAC,CAAC;EAC7E;EAEAsE,aAAaA,CAAA;IACX,IAAI,IAAI,CAACR,OAAO,CAACzB,EAAE,KAAK,CAAC,EAAE;MACzB;MACA,IAAI,CAACkC,cAAc,EAAE;KACtB,MAAM,IAAI,IAAI,CAACT,OAAO,CAACzB,EAAE,EAAE;MAC1B,IAAImC,OAAO,CAAC,8BAA8B,IAAI,CAACV,OAAO,CAAC9C,WAAW,GAAG,CAAC,EAAE;QACtE,IAAI,CAACT,cAAc,CAAC+D,aAAa,CAAC,IAAI,CAACR,OAAO,CAACzB,EAAE,CAAC,CAC/CF,SAAS,CAAC;UACT0B,IAAI,EAAEA,CAAA,KAAM,IAAI,CAACU,cAAc,EAAE;UACjCP,KAAK,EAAEC,GAAG,IAAI,IAAI,CAACtD,YAAY,GAAGsD;SACnC,CAAC;;;EAGV;EAEAQ,aAAaA,CAACC,KAAU;IACxB,MAAMC,IAAI,GAAGD,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;IAClC,IAAI,CAACjE,iBAAiB,GAAG+D,IAAI;EAC7B;EAKA;EACAG,eAAeA,CAAA;IACb,MAAMC,KAAK,GAAG,IAAI,CAACvE,WAAW,CAACwE,QAAQ,EAAE;IACzC,MAAMC,OAAO,GAAG,IAAInF,WAAW,EAAE,CAACoF,GAAG,CAAC,eAAe,EAAE,UAAUH,KAAK,EAAE,CAAC;IACzE,IAAI,CAACtE,IAAI,CAACP,GAAG,CAAC,oCAAoC,EAAE;MAAE+E;IAAO,CAAE,CAAC,CAAC9C,SAAS,CAAEgD,IAAS,IAAI;MACvF,IAAI,CAACC,UAAU,GAAGD,IAAI;IACxB,CAAC,CAAC;EACJ;EAIAE,WAAWA,CAAA;IACT,IAAI,IAAI,CAACpF,WAAW,CAACqF,KAAK,IAAI,IAAI,CAACrF,WAAW,CAACsF,KAAK,EAAE;MACpD,MAAMC,WAAW,GAAG;QAAE,GAAG,IAAI,CAAC1B,OAAO;QAAE,GAAG,IAAI,CAAC7D,WAAW,CAACkD;MAAK,CAAE;MAClEQ,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAChD,iBAAiB,CAAC;MAC3D+C,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAChD,iBAAiB,EAAE6E,IAAI,CAAC;MACjE,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;MAC/BD,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEJ,WAAW,CAACxE,WAAW,CAAC;MACvD0E,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEJ,WAAW,CAACpE,WAAW,CAAC;MACvDsE,QAAQ,CAACE,MAAM,CAAC,YAAY,EAAEJ,WAAW,CAACnE,UAAU,CAACwE,QAAQ,EAAE,CAAC;MAChEH,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEJ,WAAW,CAACxD,WAAW,CAAC;MACvD0D,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEJ,WAAW,CAAC3D,KAAK,CAACgE,QAAQ,EAAE,CAAC;MACtDH,QAAQ,CAACE,MAAM,CAAC,aAAa,EAAEJ,WAAW,CAAC5D,WAAW,CAAC;MAEvD,IAAI,IAAI,CAAChB,iBAAiB,EAAE;QAC1B8E,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAAChF,iBAAiB,EAAE,IAAI,CAACA,iBAAiB,CAAC6E,IAAI,CAAC;;MAG/E,IAAID,WAAW,CAACnD,EAAE,KAAK,CAAC,EAAE;QACxB,IAAI,CAAC9B,cAAc,CAACuF,sBAAsB,CAACJ,QAAQ,CAAC,CACjDvD,SAAS,CACP4D,QAAQ,IAAI;UACXpC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEmC,QAAQ,CAAC;UACjD,IAAI,CAACxB,cAAc,EAAE;QACvB,CAAC,EACAP,KAAK,IAAI;UACRL,OAAO,CAACK,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;UAC/C,IAAI,CAACrD,YAAY,GAAG,yBAAyB;QAC/C,CAAC,CACF;OACJ,MAAM,IAAI,IAAI,CAACC,iBAAiB,EAAE;QACjC;QACA,IAAI,CAACL,cAAc,CAACyF,sBAAsB,CAACR,WAAW,CAACnD,EAAE,EAAEqD,QAAQ,CAAC,CACjEvD,SAAS,CACP4D,QAAQ,IAAI;UACXpC,OAAO,CAACC,GAAG,CAAC,qCAAqC,EAAEmC,QAAQ,CAAC;UAC5D,IAAI,CAACxB,cAAc,EAAE;QACvB,CAAC,EACAP,KAAK,IAAI;UACRL,OAAO,CAACK,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;UAC1D,IAAI,CAACrD,YAAY,GAAG,oCAAoC;QAC1D,CAAC,CACF;OACJ,MAAM;QACL;QACA,IAAI,CAACJ,cAAc,CAAC0F,aAAa,CAACT,WAAW,CAAC,CAC3CrD,SAAS,CACP4D,QAAQ,IAAI;UACXpC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEmC,QAAQ,CAAC;UACjD,IAAI,CAACxB,cAAc,EAAE;QACvB,CAAC,EACAP,KAAK,IAAI;UACRL,OAAO,CAACK,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;UAC/C,IAAI,CAACrD,YAAY,GAAG,yBAAyB;QAC/C,CAAC,CACF;;KAEN,MAAM;MACL,IAAI,CAACA,YAAY,GAAG,uCAAuC;;EAE/D;EAKA4D,cAAcA,CAAA;IACZ;IACA,IAAI,CAACtE,WAAW,CAACiE,KAAK,EAAE;IACxB,IAAI,CAAC5D,MAAM,CAAC4F,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;EACrC;CAMD;AAlPsDC,UAAA,EAApD/G,YAAY,CAACI,eAAe,EAAE;EAAE4G,IAAI,EAAE/G;AAAU,CAAE,CAAC,C,8DAAkC;AAD3EU,oBAAoB,GAAAoG,UAAA,EAHhChH,SAAS,CAAC;EACTkH,WAAW,EAAE;CACd,CAAC,C,EACWtG,oBAAoB,CAmPhC;SAnPYA,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}