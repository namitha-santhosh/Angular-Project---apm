{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { HttpHeaders } from '@angular/common/http';\nlet ViewCartComponent = class ViewCartComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.products = [];\n  }\n  ngOnInit() {\n    this.fetchCartData();\n  }\n  fetchCartData() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.http.get('http://127.0.0.1:8000/api/cart/view-cart', {\n      headers\n    }).subscribe(data => {\n      this.username = data.username;\n      this.products = data.products;\n    });\n  }\n  removeProduct(productId) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.http.post(`http://127.0.0.1:8000/api/cart/remove-product/${productId}`, {}, {\n      headers\n    }).subscribe(() => {\n      alert('Product removed from cart.');\n      this.fetchCartData();\n    }, error => {\n      console.error('Error removing product:', error);\n      alert(\"Something went wrong\");\n    });\n  }\n};\nViewCartComponent = __decorate([Component({\n  selector: 'app-view-cart',\n  templateUrl: './viewcart.component.html',\n  styleUrls: ['./viewcart.component.css']\n})], ViewCartComponent);\nexport { ViewCartComponent };","map":{"version":3,"names":["Component","HttpHeaders","ViewCartComponent","constructor","http","authService","products","ngOnInit","fetchCartData","token","getToken","headers","set","get","subscribe","data","username","removeProduct","productId","post","alert","error","console","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\viewcart\\viewcart.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n}\n\n@Component({\n  selector: 'app-view-cart',\n  templateUrl: './viewcart.component.html',\n  styleUrls: ['./viewcart.component.css']\n})\nexport class ViewCartComponent implements OnInit {\n  username: string | undefined;\n  products: Product[] = [];\n\n  constructor(private http: HttpClient, private authService:AuthService) {}\n\n  ngOnInit(): void {\n    this.fetchCartData();\n  }\n\n  fetchCartData() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n\n    this.http.get<any>('http://127.0.0.1:8000/api/cart/view-cart', { headers }).subscribe(data => {\n      this.username = data.username;\n      this.products = data.products;\n    });\n  }\n\n\n  removeProduct(productId: number) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n  \n    this.http.post<any>(`http://127.0.0.1:8000/api/cart/remove-product/${productId}`, {}, { headers }).subscribe(\n      () => {\n        alert('Product removed from cart.');\n        this.fetchCartData();\n      },\n      (error) => {\n        console.error('Error removing product:', error);\n        alert(\"Something went wrong\");\n      }\n    );\n  }\n  \n  \n}\n\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAAqBC,WAAW,QAAQ,sBAAsB;AAe9D,IAAaC,iBAAiB,GAA9B,MAAaA,iBAAiB;EAI5BC,YAAoBC,IAAgB,EAAUC,WAAuB;IAAjD,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,WAAW,GAAXA,WAAW;IAFzD,KAAAC,QAAQ,GAAc,EAAE;EAEgD;EAExEC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAA,aAAaA,CAAA;IACX,MAAMC,KAAK,GAAG,IAAI,CAACJ,WAAW,CAACK,QAAQ,EAAE;IACzC,MAAMC,OAAO,GAAG,IAAIV,WAAW,EAAE,CAACW,GAAG,CAAC,eAAe,EAAE,UAAUH,KAAK,EAAE,CAAC;IAEzE,IAAI,CAACL,IAAI,CAACS,GAAG,CAAM,0CAA0C,EAAE;MAAEF;IAAO,CAAE,CAAC,CAACG,SAAS,CAACC,IAAI,IAAG;MAC3F,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAACC,QAAQ;MAC7B,IAAI,CAACV,QAAQ,GAAGS,IAAI,CAACT,QAAQ;IAC/B,CAAC,CAAC;EACJ;EAGAW,aAAaA,CAACC,SAAiB;IAC7B,MAAMT,KAAK,GAAG,IAAI,CAACJ,WAAW,CAACK,QAAQ,EAAE;IACzC,MAAMC,OAAO,GAAG,IAAIV,WAAW,EAAE,CAACW,GAAG,CAAC,eAAe,EAAE,UAAUH,KAAK,EAAE,CAAC;IAEzE,IAAI,CAACL,IAAI,CAACe,IAAI,CAAM,iDAAiDD,SAAS,EAAE,EAAE,EAAE,EAAE;MAAEP;IAAO,CAAE,CAAC,CAACG,SAAS,CAC1G,MAAK;MACHM,KAAK,CAAC,4BAA4B,CAAC;MACnC,IAAI,CAACZ,aAAa,EAAE;IACtB,CAAC,EACAa,KAAK,IAAI;MACRC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CD,KAAK,CAAC,sBAAsB,CAAC;IAC/B,CAAC,CACF;EACH;CAGD;AAtCYlB,iBAAiB,GAAAqB,UAAA,EAL7BvB,SAAS,CAAC;EACTwB,QAAQ,EAAE,eAAe;EACzBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,C,EACWxB,iBAAiB,CAsC7B;SAtCYA,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}