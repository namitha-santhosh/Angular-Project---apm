{"ast":null,"code":"var _class;\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction CategoryComponent_option_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r2.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(category_r2.name);\n  }\n}\nfunction CategoryComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r3 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r3.productCode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(7, 3, product_r3.price, \"USD\", true, \"1.2-2\"));\n  }\n}\nclass CategoryComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.categories = []; // Array to store fetched categories\n    this.selectedCategoryId = null; // Store the selected category ID\n    this.selectedCategoryName = ''; // Store the name of the selected category\n    this.products = []; // Array to store fetched products\n  }\n\n  ngOnInit() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    // Fetch categories from your API (replace with your actual API endpoint)\n    this.http.get('http://127.0.0.1:8000/api/category', {\n      headers\n    }).subscribe(data => {\n      this.categories = data;\n    });\n  }\n  onCategoryChange() {\n    if (this.selectedCategoryId !== null) {\n      const categoryId = +this.selectedCategoryId; // Convert to integer\n      const apiUrl = `http://127.0.0.1:8000/api/category/${categoryId}`;\n      const token = this.authService.getToken();\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      this.http.get(apiUrl, {\n        headers\n      }).subscribe(data => {\n        this.products = data;\n      });\n      // Update the selectedCategoryName based on the selectedCategoryId\n      const selectedCategory = this.categories.find(category => category.id === categoryId);\n      this.selectedCategoryName = selectedCategory ? selectedCategory.name : '';\n    } else {\n      // If no category is selected, clear the products array and reset the selectedCategoryName\n      this.products = [];\n      this.selectedCategoryName = '';\n    }\n  }\n}\n_class = CategoryComponent;\n_class.ɵfac = function CategoryComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-category\"]],\n  decls: 29,\n  vars: 4,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"container\", \"mt-4\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"form-group\"], [\"for\", \"categorySelect\", 1, \"text-primary\"], [\"id\", \"categorySelect\", 1, \"form-control\", \"custom-select\", 3, \"ngModel\", \"ngModelChange\", \"change\"], [\"value\", \"\", \"disabled\", \"\", \"selected\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-12\"], [1, \"text-primary\"], [1, \"table-responsive\"], [1, \"table\", \"table-bordered\", \"table-striped\"], [1, \"thead-dark\"], [\"scope\", \"col\"], [4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n  template: function CategoryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2, \" Products by Category \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"label\", 6);\n      i0.ɵɵtext(8, \"Select Category:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"select\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function CategoryComponent_Template_select_ngModelChange_9_listener($event) {\n        return ctx.selectedCategoryId = $event;\n      })(\"change\", function CategoryComponent_Template_select_change_9_listener() {\n        return ctx.onCategoryChange();\n      });\n      i0.ɵɵelementStart(10, \"option\", 8);\n      i0.ɵɵtext(11, \"Select Category\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, CategoryComponent_option_12_Template, 2, 2, \"option\", 9);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(13, \"div\", 3)(14, \"div\", 10)(15, \"h4\", 11);\n      i0.ɵɵtext(16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"div\", 12)(18, \"table\", 13)(19, \"thead\", 14)(20, \"tr\")(21, \"th\", 15);\n      i0.ɵɵtext(22, \"Product Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"th\", 15);\n      i0.ɵɵtext(24, \"Product Code\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"th\", 15);\n      i0.ɵɵtext(26, \"Price\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(27, \"tbody\");\n      i0.ɵɵtemplate(28, CategoryComponent_tr_28_Template, 8, 8, \"tr\", 16);\n      i0.ɵɵelementEnd()()()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedCategoryId);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate1(\"Products in \", ctx.selectedCategoryName || \"Selected Category\", \"\");\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  dependencies: [i3.NgForOf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel, i3.CurrencyPipe],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { CategoryComponent };","map":{"version":3,"names":["HttpHeaders","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","category_r2","id","ɵɵadvance","ɵɵtextInterpolate","name","product_r3","productName","productCode","ɵɵpipeBind4","price","CategoryComponent","constructor","http","authService","categories","selectedCategoryId","selectedCategoryName","products","ngOnInit","token","getToken","headers","set","get","subscribe","data","onCategoryChange","categoryId","apiUrl","selectedCategory","find","category","ɵɵdirectiveInject","i1","HttpClient","i2","AuthService","selectors","decls","vars","consts","template","CategoryComponent_Template","rf","ctx","ɵɵlistener","CategoryComponent_Template_select_ngModelChange_9_listener","$event","CategoryComponent_Template_select_change_9_listener","ɵɵtemplate","CategoryComponent_option_12_Template","CategoryComponent_tr_28_Template","ɵɵtextInterpolate1"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\category\\category.component.ts","C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\category\\category.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\n\n@Component({\n  selector: 'app-category',\n  templateUrl: './category.component.html',\n  styleUrls: ['./category.component.css'],\n})\nexport class CategoryComponent implements OnInit {\n  categories: any[] = []; // Array to store fetched categories\n  selectedCategoryId: number | null = null; // Store the selected category ID\n  selectedCategoryName: string = ''; // Store the name of the selected category\n  products: any[] = []; // Array to store fetched products\n\n  constructor(private http: HttpClient, private authService: AuthService) { }\n\n  ngOnInit(): void {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    \n    // Fetch categories from your API (replace with your actual API endpoint)\n    this.http.get('http://127.0.0.1:8000/api/category', { headers }).subscribe((data: any) => {\n      this.categories = data;\n    });\n  }\n\n  onCategoryChange(): void {\n    if (this.selectedCategoryId !== null) {\n      const categoryId = +this.selectedCategoryId; // Convert to integer\n      const apiUrl = `http://127.0.0.1:8000/api/category/${categoryId}`;\n      const token = this.authService.getToken();\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);  \n\n      this.http.get(apiUrl, { headers }).subscribe((data: any) => {\n        this.products = data;\n      });\n\n      // Update the selectedCategoryName based on the selectedCategoryId\n      const selectedCategory = this.categories.find(category => category.id === categoryId);\n      this.selectedCategoryName = selectedCategory ? selectedCategory.name : '';\n    } else {\n      // If no category is selected, clear the products array and reset the selectedCategoryName\n      this.products = [];\n      this.selectedCategoryName = '';\n    }\n  }\n}\n","<div class=\"card\">\n    <div class=\"card-header\">\n      Products by Category\n    </div>\n    <div class=\"container mt-4\">\n    <div class=\"row\">\n        <div class=\"col-md-4\">\n        <!-- Category selection dropdown -->\n        <div class=\"form-group\">\n            <label for=\"categorySelect\" class=\"text-primary\">Select Category:</label>\n            <select class=\"form-control custom-select\" id=\"categorySelect\" [(ngModel)]=\"selectedCategoryId\" (change)=\"onCategoryChange()\">\n            <option value=\"\" disabled selected>Select Category</option>\n            <option *ngFor=\"let category of categories\" [value]=\"category.id\">{{ category.name }}</option>\n            </select>\n        </div>\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-md-12\">\n        \n        <h4 class=\"text-primary\">Products in {{ selectedCategoryName || 'Selected Category' }}</h4>\n        <div class=\"table-responsive\">\n            <table class=\"table table-bordered table-striped\">\n            <thead class=\"thead-dark\">\n                <tr>\n                <th scope=\"col\">Product Name</th>\n                <th scope=\"col\">Product Code</th>\n                <th scope=\"col\">Price</th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let product of products\">\n                <td>{{ product.productName }}</td>\n                <td>{{ product.productCode }}</td>\n                <td>{{ product.price | currency:'USD':true:'1.2-2' }}</td>\n                </tr>\n            </tbody>\n            </table>\n        </div>\n        </div>\n    </div>\n    </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}