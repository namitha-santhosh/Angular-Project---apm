{"ast":null,"code":"var _class;\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction ViewCartComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8);\n    i0.ɵɵtext(1, \" Add your first product to Cart. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ViewCartComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵelement(1, \"img\", 10);\n    i0.ɵɵelementStart(2, \"div\", 11)(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ViewCartComponent_div_5_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const product_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.removeProduct(product_r2.id));\n    });\n    i0.ɵɵtext(10, \"Remove\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r2.name);\n    i0.ɵɵproperty(\"src\", product_r2.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r2.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: $\", product_r2.price, \"\");\n  }\n}\nclass ViewCartComponent {\n  constructor(http, authService, router) {\n    this.http = http;\n    this.authService = authService;\n    this.router = router;\n    this.products = [];\n  }\n  ngOnInit() {\n    this.fetchCartData();\n  }\n  fetchCartData() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.http.get('http://127.0.0.1:8000/api/cart/view-cart', {\n      headers\n    }).subscribe(data => {\n      this.username = data.username;\n      this.products = data.products;\n    });\n  }\n  removeProduct(productId) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.http.post(`http://127.0.0.1:8000/api/cart/remove-product/${productId}`, {}, {\n      headers\n    }).subscribe(() => {\n      alert('Product removed from cart.');\n      this.fetchCartData();\n    }, error => {\n      console.error('Error removing product:', error);\n      alert(\"Something went wrong\");\n    });\n  }\n  fetchImage(imageUrl) {\n    this.http.get(imageUrl, {\n      responseType: 'blob'\n    }).subscribe(response => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageElement = document.getElementById('productImage');\n        imageElement.src = reader.result;\n      };\n      reader.readAsDataURL(response);\n    });\n  }\n  onBack() {\n    this.router.navigate(['/products']);\n  }\n}\n_class = ViewCartComponent;\n_class.ɵfac = function ViewCartComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-view-cart\"]],\n  decls: 10,\n  vars: 3,\n  consts: [[1, \"card\"], [1, \"card-header\"], [\"class\", \"cart-empty-message\", 4, \"ngIf\"], [1, \"cart-container\"], [\"class\", \"product-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-md-4\"], [1, \"btn\", \"btn-outline-secondary\", \"mr-3\", 2, \"width\", \"80px\", 3, \"click\"], [1, \"fa\", \"fa-chevron-left\"], [1, \"cart-empty-message\"], [1, \"product-card\"], [1, \"product-image\", 3, \"src\", \"alt\"], [1, \"product-details\"], [1, \"remove\", 3, \"click\"]],\n  template: function ViewCartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, ViewCartComponent_div_3_Template, 2, 0, \"div\", 2);\n      i0.ɵɵelementStart(4, \"div\", 3);\n      i0.ɵɵtemplate(5, ViewCartComponent_div_5_Template, 11, 5, \"div\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"div\", 5)(7, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function ViewCartComponent_Template_button_click_7_listener() {\n        return ctx.onBack();\n      });\n      i0.ɵɵelement(8, \"i\", 7);\n      i0.ɵɵtext(9, \" Back \");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" Shopping Cart for \", ctx.username, \" \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.products.length === 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf],\n  styles: [\".cart-container[_ngcontent-%COMP%] {\\r\\n    margin: 20px;\\r\\n  }\\r\\n  \\r\\n  .product-card[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    margin-bottom: 20px;\\r\\n    border: 1px solid #ccc;\\r\\n    padding: 10px;\\r\\n  }\\r\\n  \\r\\n  .product-image[_ngcontent-%COMP%] {\\r\\n    max-width: 100px;\\r\\n    max-height: 100px;\\r\\n    margin-right: 10px;\\r\\n  }\\r\\n  \\r\\n  .product-details[_ngcontent-%COMP%] {\\r\\n    flex-grow: 1;\\r\\n  }\\r\\n  \\r\\n  .remove[_ngcontent-%COMP%] {\\r\\n    background-color: red;\\r\\n    color: white;\\r\\n    border: none;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n\\r\\n  .cart-empty-message[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    color: red;\\r\\n    font-weight: bold;\\r\\n  }\\r\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdmlld2NhcnQvdmlld2NhcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFlBQVk7RUFDZDs7RUFFQTtJQUNFLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsc0JBQXNCO0lBQ3RCLGFBQWE7RUFDZjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixpQkFBaUI7SUFDakIsa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsWUFBWTtFQUNkOztFQUVBO0lBQ0UscUJBQXFCO0lBQ3JCLFlBQVk7SUFDWixZQUFZO0lBQ1osZUFBZTtFQUNqQjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsaUJBQWlCO0VBQ25CIiwic291cmNlc0NvbnRlbnQiOlsiLmNhcnQtY29udGFpbmVyIHtcclxuICAgIG1hcmdpbjogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3QtY2FyZCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdC1pbWFnZSB7XHJcbiAgICBtYXgtd2lkdGg6IDEwMHB4O1xyXG4gICAgbWF4LWhlaWdodDogMTAwcHg7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5wcm9kdWN0LWRldGFpbHMge1xyXG4gICAgZmxleC1ncm93OiAxO1xyXG4gIH1cclxuICBcclxuICAucmVtb3ZlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJlZDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICB9XHJcblxyXG4gIC5jYXJ0LWVtcHR5LW1lc3NhZ2Uge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgY29sb3I6IHJlZDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIH1cclxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nexport { ViewCartComponent };","map":{"version":3,"names":["HttpHeaders","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","ViewCartComponent_div_5_Template_button_click_9_listener","restoredCtx","ɵɵrestoreView","_r4","product_r2","$implicit","ctx_r3","ɵɵnextContext","ɵɵresetView","removeProduct","id","ɵɵadvance","ɵɵpropertyInterpolate","name","ɵɵproperty","imageUrl","ɵɵsanitizeUrl","ɵɵtextInterpolate","description","ɵɵtextInterpolate1","price","ViewCartComponent","constructor","http","authService","router","products","ngOnInit","fetchCartData","token","getToken","headers","set","get","subscribe","data","username","productId","post","alert","error","console","fetchImage","responseType","response","reader","FileReader","onloadend","imageElement","document","getElementById","src","result","readAsDataURL","onBack","navigate","ɵɵdirectiveInject","i1","HttpClient","i2","AuthService","i3","Router","selectors","decls","vars","consts","template","ViewCartComponent_Template","rf","ctx","ɵɵtemplate","ViewCartComponent_div_3_Template","ViewCartComponent_div_5_Template","ViewCartComponent_Template_button_click_7_listener","length"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\viewcart\\viewcart.component.ts","C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\viewcart\\viewcart.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\nimport { Router } from '@angular/router';\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n  imageUrl: string;\n}\n\n@Component({\n  selector: 'app-view-cart',\n  templateUrl: './viewcart.component.html',\n  styleUrls: ['./viewcart.component.css']\n})\nexport class ViewCartComponent implements OnInit {\n  username: string | undefined;\n  products: Product[] = [];\n\n  constructor(private http: HttpClient, private authService:AuthService, private router: Router) {}\n\n  ngOnInit(): void {\n    this.fetchCartData();\n  }\n\n  fetchCartData() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n\n    this.http.get<any>('http://127.0.0.1:8000/api/cart/view-cart', { headers }).subscribe(data => {\n      this.username = data.username;\n      this.products = data.products;\n    });\n  }\n\n\n  removeProduct(productId: number) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n  \n    this.http.post<any>(`http://127.0.0.1:8000/api/cart/remove-product/${productId}`, {}, { headers }).subscribe(\n      () => {\n        alert('Product removed from cart.');\n        this.fetchCartData();\n      },\n      (error) => {\n        console.error('Error removing product:', error);\n        alert(\"Something went wrong\");\n      }\n    );\n  }\n  \n  \n  fetchImage(imageUrl: string): void {\n    this.http.get(imageUrl, { responseType: 'blob' }).subscribe(response => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageElement = document.getElementById('productImage') as HTMLImageElement;\n        imageElement.src = reader.result as string;\n      };\n      reader.readAsDataURL(response);\n    });\n  }\n\n  onBack(): void {\n    this.router.navigate(['/products']);\n  }\n  \n}\n\n","<div class=\"card\">\n    <div class=\"card-header\">\n        Shopping Cart for {{ username }}\n      </div>\n\n      \n  <div *ngIf=\"products.length === 0\" class=\"cart-empty-message\">\n    Add your first product to Cart. \n  </div>\n    \n<div class=\"cart-container\">\n    <div class=\"product-card\" *ngFor=\"let product of products\">\n      <img [src]=\"product.imageUrl\" alt=\"{{ product.name }}\" class=\"product-image\">\n      <div class=\"product-details\">\n        <h3>{{ product.name }}</h3>\n        <p>{{ product.description }}</p>\n        <p>Price: ${{ product.price }}</p>\n        <button class=\"remove\" (click)=\"removeProduct(product.id)\">Remove</button>\n      </div>\n    </div>\n  </div>\n  <div class=\"col-md-4\">\n    <button class=\"btn btn-outline-secondary mr-3\"\n            style=\"width:80px\"\n            (click)=\"onBack()\">\n      <i class=\"fa fa-chevron-left\"></i> Back\n    </button>\n    </div>\n</div>\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}