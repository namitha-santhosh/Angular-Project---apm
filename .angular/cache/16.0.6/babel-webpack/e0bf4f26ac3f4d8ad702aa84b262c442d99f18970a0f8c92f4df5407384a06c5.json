{"ast":null,"code":"var _class;\nimport { HttpHeaders } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../auth.service\";\nimport * as i3 from \"@angular/common\";\nfunction ViewCartComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelement(1, \"img\", 5);\n    i0.ɵɵelementStart(2, \"div\", 6)(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ViewCartComponent_div_4_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeProduct(product_r1.id));\n    });\n    i0.ɵɵtext(10, \"Remove\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r1.name);\n    i0.ɵɵproperty(\"src\", product_r1.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(product_r1.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r1.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: $\", product_r1.price, \"\");\n  }\n}\nclass ViewCartComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.products = [];\n  }\n  ngOnInit() {\n    this.fetchCartData();\n  }\n  fetchCartData() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.http.get('http://127.0.0.1:8000/api/cart/view-cart', {\n      headers\n    }).subscribe(data => {\n      this.username = data.username;\n      this.products = data.products;\n    });\n  }\n  removeProduct(productId) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    this.http.post(`http://127.0.0.1:8000/api/cart/remove-product/${productId}`, {}, {\n      headers\n    }).subscribe(() => {\n      alert('Product removed from cart.');\n      this.fetchCartData();\n    }, error => {\n      console.error('Error removing product:', error);\n      alert(\"Something went wrong\");\n    });\n  }\n  fetchImage(imageUrl) {\n    this.http.get(imageUrl, {\n      responseType: 'blob'\n    }).subscribe(response => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageElement = document.getElementById('productImage');\n        imageElement.src = reader.result;\n      };\n      reader.readAsDataURL(response);\n    });\n  }\n}\n_class = ViewCartComponent;\n_class.ɵfac = function ViewCartComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.AuthService));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-view-cart\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"cart-container\"], [\"class\", \"product-card\", 4, \"ngFor\", \"ngForOf\"], [1, \"product-card\"], [1, \"product-image\", 3, \"src\", \"alt\"], [1, \"product-details\"], [3, \"click\"]],\n  template: function ViewCartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵtext(2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, ViewCartComponent_div_4_Template, 11, 5, \"div\", 3);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" Shopping Cart for \", ctx.username, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  dependencies: [i3.NgForOf],\n  styles: [\".cart-container[_ngcontent-%COMP%] {\\r\\n    margin: 20px;\\r\\n  }\\r\\n  \\r\\n  .product-card[_ngcontent-%COMP%] {\\r\\n    display: flex;\\r\\n    margin-bottom: 20px;\\r\\n    border: 1px solid #ccc;\\r\\n    padding: 10px;\\r\\n  }\\r\\n  \\r\\n  .product-image[_ngcontent-%COMP%] {\\r\\n    max-width: 100px;\\r\\n    max-height: 100px;\\r\\n    margin-right: 10px;\\r\\n  }\\r\\n  \\r\\n  .product-details[_ngcontent-%COMP%] {\\r\\n    flex-grow: 1;\\r\\n  }\\r\\n  \\r\\n  button[_ngcontent-%COMP%] {\\r\\n    background-color: red;\\r\\n    color: white;\\r\\n    border: none;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvdmlld2NhcnQvdmlld2NhcnQuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLFlBQVk7RUFDZDs7RUFFQTtJQUNFLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsc0JBQXNCO0lBQ3RCLGFBQWE7RUFDZjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixpQkFBaUI7SUFDakIsa0JBQWtCO0VBQ3BCOztFQUVBO0lBQ0UsWUFBWTtFQUNkOztFQUVBO0lBQ0UscUJBQXFCO0lBQ3JCLFlBQVk7SUFDWixZQUFZO0lBQ1osZUFBZTtFQUNqQiIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJ0LWNvbnRhaW5lciB7XHJcbiAgICBtYXJnaW46IDIwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5wcm9kdWN0LWNhcmQge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgcGFkZGluZzogMTBweDtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3QtaW1hZ2Uge1xyXG4gICAgbWF4LXdpZHRoOiAxMDBweDtcclxuICAgIG1heC1oZWlnaHQ6IDEwMHB4O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdC1kZXRhaWxzIHtcclxuICAgIGZsZXgtZ3JvdzogMTtcclxuICB9XHJcbiAgXHJcbiAgYnV0dG9uIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHJlZDtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJvcmRlcjogbm9uZTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICB9XHJcbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { ViewCartComponent };","map":{"version":3,"names":["HttpHeaders","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","ViewCartComponent_div_4_Template_button_click_9_listener","restoredCtx","ɵɵrestoreView","_r3","product_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","removeProduct","id","ɵɵadvance","ɵɵpropertyInterpolate","name","ɵɵproperty","imageUrl","ɵɵsanitizeUrl","ɵɵtextInterpolate","description","ɵɵtextInterpolate1","price","ViewCartComponent","constructor","http","authService","products","ngOnInit","fetchCartData","token","getToken","headers","set","get","subscribe","data","username","productId","post","alert","error","console","fetchImage","responseType","response","reader","FileReader","onloadend","imageElement","document","getElementById","src","result","readAsDataURL","ɵɵdirectiveInject","i1","HttpClient","i2","AuthService","selectors","decls","vars","consts","template","ViewCartComponent_Template","rf","ctx","ɵɵtemplate","ViewCartComponent_div_4_Template"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\viewcart\\viewcart.component.ts","C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\viewcart\\viewcart.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\n\ninterface Product {\n  id: number;\n  name: string;\n  price: number;\n  description: string;\n  imageUrl: string;\n}\n\n@Component({\n  selector: 'app-view-cart',\n  templateUrl: './viewcart.component.html',\n  styleUrls: ['./viewcart.component.css']\n})\nexport class ViewCartComponent implements OnInit {\n  username: string | undefined;\n  products: Product[] = [];\n\n  constructor(private http: HttpClient, private authService:AuthService) {}\n\n  ngOnInit(): void {\n    this.fetchCartData();\n  }\n\n  fetchCartData() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n\n    this.http.get<any>('http://127.0.0.1:8000/api/cart/view-cart', { headers }).subscribe(data => {\n      this.username = data.username;\n      this.products = data.products;\n    });\n  }\n\n\n  removeProduct(productId: number) {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n  \n    this.http.post<any>(`http://127.0.0.1:8000/api/cart/remove-product/${productId}`, {}, { headers }).subscribe(\n      () => {\n        alert('Product removed from cart.');\n        this.fetchCartData();\n      },\n      (error) => {\n        console.error('Error removing product:', error);\n        alert(\"Something went wrong\");\n      }\n    );\n  }\n  \n  \n  fetchImage(imageUrl: string): void {\n    this.http.get(imageUrl, { responseType: 'blob' }).subscribe(response => {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        const imageElement = document.getElementById('productImage') as HTMLImageElement;\n        imageElement.src = reader.result as string;\n      };\n      reader.readAsDataURL(response);\n    });\n  }\n  \n}\n\n","<div class=\"card\">\n    <div class=\"card-header\">\n        Shopping Cart for {{ username }}\n      </div>\n    \n<div class=\"cart-container\">\n    <div class=\"product-card\" *ngFor=\"let product of products\">\n      <img [src]=\"product.imageUrl\" alt=\"{{ product.name }}\" class=\"product-image\">\n      <div class=\"product-details\">\n        <h3>{{ product.name }}</h3>\n        <p>{{ product.description }}</p>\n        <p>Price: ${{ product.price }}</p>\n        <button (click)=\"removeProduct(product.id)\">Remove</button>\n      </div>\n    </div>\n  </div>\n</div>\n  "],"mappings":";AACA,SAAqBA,WAAW,QAAQ,sBAAsB;;;;;;;;ICK1DC,EAAA,CAAAC,cAAA,aAA2D;IACzDD,EAAA,CAAAE,SAAA,aAA6E;IAC7EF,EAAA,CAAAC,cAAA,aAA6B;IACvBD,EAAA,CAAAG,MAAA,GAAkB;IAAAH,EAAA,CAAAI,YAAA,EAAK;IAC3BJ,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAG,MAAA,GAAyB;IAAAH,EAAA,CAAAI,YAAA,EAAI;IAChCJ,EAAA,CAAAC,cAAA,QAAG;IAAAD,EAAA,CAAAG,MAAA,GAA2B;IAAAH,EAAA,CAAAI,YAAA,EAAI;IAClCJ,EAAA,CAAAC,cAAA,gBAA4C;IAApCD,EAAA,CAAAK,UAAA,mBAAAC,yDAAA;MAAA,MAAAC,WAAA,GAAAP,EAAA,CAAAQ,aAAA,CAAAC,GAAA;MAAA,MAAAC,UAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,MAAA,GAAAZ,EAAA,CAAAa,aAAA;MAAA,OAASb,EAAA,CAAAc,WAAA,CAAAF,MAAA,CAAAG,aAAA,CAAAL,UAAA,CAAAM,EAAA,CAAyB;IAAA,EAAC;IAAChB,EAAA,CAAAG,MAAA,cAAM;IAAAH,EAAA,CAAAI,YAAA,EAAS;;;;IAL/BJ,EAAA,CAAAiB,SAAA,GAAwB;IAAxBjB,EAAA,CAAAkB,qBAAA,QAAAR,UAAA,CAAAS,IAAA,CAAwB;IAAjDnB,EAAA,CAAAoB,UAAA,QAAAV,UAAA,CAAAW,QAAA,EAAArB,EAAA,CAAAsB,aAAA,CAAwB;IAEvBtB,EAAA,CAAAiB,SAAA,GAAkB;IAAlBjB,EAAA,CAAAuB,iBAAA,CAAAb,UAAA,CAAAS,IAAA,CAAkB;IACnBnB,EAAA,CAAAiB,SAAA,GAAyB;IAAzBjB,EAAA,CAAAuB,iBAAA,CAAAb,UAAA,CAAAc,WAAA,CAAyB;IACzBxB,EAAA,CAAAiB,SAAA,GAA2B;IAA3BjB,EAAA,CAAAyB,kBAAA,aAAAf,UAAA,CAAAgB,KAAA,KAA2B;;;ADCtC,MAKaC,iBAAiB;EAI5BC,YAAoBC,IAAgB,EAAUC,WAAuB;IAAjD,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,WAAW,GAAXA,WAAW;IAFzD,KAAAC,QAAQ,GAAc,EAAE;EAEgD;EAExEC,QAAQA,CAAA;IACN,IAAI,CAACC,aAAa,EAAE;EACtB;EAEAA,aAAaA,CAAA;IACX,MAAMC,KAAK,GAAG,IAAI,CAACJ,WAAW,CAACK,QAAQ,EAAE;IACzC,MAAMC,OAAO,GAAG,IAAIrC,WAAW,EAAE,CAACsC,GAAG,CAAC,eAAe,EAAE,UAAUH,KAAK,EAAE,CAAC;IAEzE,IAAI,CAACL,IAAI,CAACS,GAAG,CAAM,0CAA0C,EAAE;MAAEF;IAAO,CAAE,CAAC,CAACG,SAAS,CAACC,IAAI,IAAG;MAC3F,IAAI,CAACC,QAAQ,GAAGD,IAAI,CAACC,QAAQ;MAC7B,IAAI,CAACV,QAAQ,GAAGS,IAAI,CAACT,QAAQ;IAC/B,CAAC,CAAC;EACJ;EAGAhB,aAAaA,CAAC2B,SAAiB;IAC7B,MAAMR,KAAK,GAAG,IAAI,CAACJ,WAAW,CAACK,QAAQ,EAAE;IACzC,MAAMC,OAAO,GAAG,IAAIrC,WAAW,EAAE,CAACsC,GAAG,CAAC,eAAe,EAAE,UAAUH,KAAK,EAAE,CAAC;IAEzE,IAAI,CAACL,IAAI,CAACc,IAAI,CAAM,iDAAiDD,SAAS,EAAE,EAAE,EAAE,EAAE;MAAEN;IAAO,CAAE,CAAC,CAACG,SAAS,CAC1G,MAAK;MACHK,KAAK,CAAC,4BAA4B,CAAC;MACnC,IAAI,CAACX,aAAa,EAAE;IACtB,CAAC,EACAY,KAAK,IAAI;MACRC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CD,KAAK,CAAC,sBAAsB,CAAC;IAC/B,CAAC,CACF;EACH;EAGAG,UAAUA,CAAC1B,QAAgB;IACzB,IAAI,CAACQ,IAAI,CAACS,GAAG,CAACjB,QAAQ,EAAE;MAAE2B,YAAY,EAAE;IAAM,CAAE,CAAC,CAACT,SAAS,CAACU,QAAQ,IAAG;MACrE,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,SAAS,GAAG,MAAK;QACtB,MAAMC,YAAY,GAAGC,QAAQ,CAACC,cAAc,CAAC,cAAc,CAAqB;QAChFF,YAAY,CAACG,GAAG,GAAGN,MAAM,CAACO,MAAgB;MAC5C,CAAC;MACDP,MAAM,CAACQ,aAAa,CAACT,QAAQ,CAAC;IAChC,CAAC,CAAC;EACJ;;SA/CWtB,iBAAiB;;mBAAjBA,MAAiB,EAAA3B,EAAA,CAAA2D,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAA7D,EAAA,CAAA2D,iBAAA,CAAAG,EAAA,CAAAC,WAAA;AAAA;;QAAjBpC,MAAiB;EAAAqC,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCjB9BtE,EAAA,CAAAC,cAAA,aAAkB;MAEVD,EAAA,CAAAG,MAAA,GACF;MAAAH,EAAA,CAAAI,YAAA,EAAM;MAEZJ,EAAA,CAAAC,cAAA,aAA4B;MACxBD,EAAA,CAAAwE,UAAA,IAAAC,gCAAA,kBAQM;MACRzE,EAAA,CAAAI,YAAA,EAAM;;;MAbAJ,EAAA,CAAAiB,SAAA,GACF;MADEjB,EAAA,CAAAyB,kBAAA,wBAAA8C,GAAA,CAAA9B,QAAA,MACF;MAG4CzC,EAAA,CAAAiB,SAAA,GAAW;MAAXjB,EAAA,CAAAoB,UAAA,YAAAmD,GAAA,CAAAxC,QAAA,CAAW;;;;;;SDWhDJ,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}