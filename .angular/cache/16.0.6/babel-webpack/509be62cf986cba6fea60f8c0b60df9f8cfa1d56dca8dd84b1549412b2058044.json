{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { HttpHeaders } from '@angular/common/http';\nlet CategoryComponent = class CategoryComponent {\n  constructor(http, authService) {\n    this.http = http;\n    this.authService = authService;\n    this.categories = []; // Array to store fetched categories\n    this.selectedCategoryId = null; // Store the selected category ID\n    this.selectedCategoryName = ''; // Store the name of the selected category\n    this.products = []; // Array to store fetched products\n  }\n\n  ngOnInit() {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    // Fetch categories from your API (replace with your actual API endpoint)\n    this.http.get('http://127.0.0.1:8000/api/category', {\n      headers\n    }).subscribe(data => {\n      this.categories = data;\n    });\n  }\n  onCategoryChange() {\n    if (this.selectedCategoryId !== null) {\n      const categoryId = +this.selectedCategoryId; // Convert to integer\n      const apiUrl = `http://127.0.0.1:8000/api/category/${categoryId}`;\n      const token = this.authService.getToken();\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n      this.http.get(apiUrl, {\n        headers\n      }).subscribe(data => {\n        this.products = data;\n      });\n      // Update the selectedCategoryName based on the selectedCategoryId\n      const selectedCategory = this.categories.find(category => category.id === categoryId);\n      this.selectedCategoryName = selectedCategory ? selectedCategory.name : '';\n    } else {\n      // If no category is selected, clear the products array and reset the selectedCategoryName\n      this.products = [];\n      this.selectedCategoryName = '';\n    }\n  }\n};\nCategoryComponent = __decorate([Component({\n  selector: 'app-category',\n  templateUrl: './category.component.html',\n  styleUrls: ['./category.component.css']\n})], CategoryComponent);\nexport { CategoryComponent };","map":{"version":3,"names":["Component","HttpHeaders","CategoryComponent","constructor","http","authService","categories","selectedCategoryId","selectedCategoryName","products","ngOnInit","token","getToken","headers","set","get","subscribe","data","onCategoryChange","categoryId","apiUrl","selectedCategory","find","category","id","name","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\hp\\OneDrive\\Desktop\\P10 - Training\\angular\\Angular Project - apm\\src\\app\\category\\category.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { AuthService } from '../auth.service';\n\n@Component({\n  selector: 'app-category',\n  templateUrl: './category.component.html',\n  styleUrls: ['./category.component.css'],\n})\nexport class CategoryComponent implements OnInit {\n  categories: any[] = []; // Array to store fetched categories\n  selectedCategoryId: number | null = null; // Store the selected category ID\n  selectedCategoryName: string = ''; // Store the name of the selected category\n  products: any[] = []; // Array to store fetched products\n\n  constructor(private http: HttpClient, private authService: AuthService) { }\n\n  ngOnInit(): void {\n    const token = this.authService.getToken();\n    const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);\n    \n    // Fetch categories from your API (replace with your actual API endpoint)\n    this.http.get('http://127.0.0.1:8000/api/category', { headers }).subscribe((data: any) => {\n      this.categories = data;\n    });\n  }\n\n  onCategoryChange(): void {\n    if (this.selectedCategoryId !== null) {\n      const categoryId = +this.selectedCategoryId; // Convert to integer\n      const apiUrl = `http://127.0.0.1:8000/api/category/${categoryId}`;\n      const token = this.authService.getToken();\n      const headers = new HttpHeaders().set('Authorization', `Bearer ${token}`);  \n\n      this.http.get(apiUrl, { headers }).subscribe((data: any) => {\n        this.products = data;\n      });\n\n      // Update the selectedCategoryName based on the selectedCategoryId\n      const selectedCategory = this.categories.find(category => category.id === categoryId);\n      this.selectedCategoryName = selectedCategory ? selectedCategory.name : '';\n    } else {\n      // If no category is selected, clear the products array and reset the selectedCategoryName\n      this.products = [];\n      this.selectedCategoryName = '';\n    }\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAgB,eAAe;AACjD,SAAqBC,WAAW,QAAQ,sBAAsB;AAQ9D,IAAaC,iBAAiB,GAA9B,MAAaA,iBAAiB;EAM5BC,YAAoBC,IAAgB,EAAUC,WAAwB;IAAlD,KAAAD,IAAI,GAAJA,IAAI;IAAsB,KAAAC,WAAW,GAAXA,WAAW;IALzD,KAAAC,UAAU,GAAU,EAAE,CAAC,CAAC;IACxB,KAAAC,kBAAkB,GAAkB,IAAI,CAAC,CAAC;IAC1C,KAAAC,oBAAoB,GAAW,EAAE,CAAC,CAAC;IACnC,KAAAC,QAAQ,GAAU,EAAE,CAAC,CAAC;EAEoD;;EAE1EC,QAAQA,CAAA;IACN,MAAMC,KAAK,GAAG,IAAI,CAACN,WAAW,CAACO,QAAQ,EAAE;IACzC,MAAMC,OAAO,GAAG,IAAIZ,WAAW,EAAE,CAACa,GAAG,CAAC,eAAe,EAAE,UAAUH,KAAK,EAAE,CAAC;IAEzE;IACA,IAAI,CAACP,IAAI,CAACW,GAAG,CAAC,oCAAoC,EAAE;MAAEF;IAAO,CAAE,CAAC,CAACG,SAAS,CAAEC,IAAS,IAAI;MACvF,IAAI,CAACX,UAAU,GAAGW,IAAI;IACxB,CAAC,CAAC;EACJ;EAEAC,gBAAgBA,CAAA;IACd,IAAI,IAAI,CAACX,kBAAkB,KAAK,IAAI,EAAE;MACpC,MAAMY,UAAU,GAAG,CAAC,IAAI,CAACZ,kBAAkB,CAAC,CAAC;MAC7C,MAAMa,MAAM,GAAG,sCAAsCD,UAAU,EAAE;MACjE,MAAMR,KAAK,GAAG,IAAI,CAACN,WAAW,CAACO,QAAQ,EAAE;MACzC,MAAMC,OAAO,GAAG,IAAIZ,WAAW,EAAE,CAACa,GAAG,CAAC,eAAe,EAAE,UAAUH,KAAK,EAAE,CAAC;MAEzE,IAAI,CAACP,IAAI,CAACW,GAAG,CAACK,MAAM,EAAE;QAAEP;MAAO,CAAE,CAAC,CAACG,SAAS,CAAEC,IAAS,IAAI;QACzD,IAAI,CAACR,QAAQ,GAAGQ,IAAI;MACtB,CAAC,CAAC;MAEF;MACA,MAAMI,gBAAgB,GAAG,IAAI,CAACf,UAAU,CAACgB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,EAAE,KAAKL,UAAU,CAAC;MACrF,IAAI,CAACX,oBAAoB,GAAGa,gBAAgB,GAAGA,gBAAgB,CAACI,IAAI,GAAG,EAAE;KAC1E,MAAM;MACL;MACA,IAAI,CAAChB,QAAQ,GAAG,EAAE;MAClB,IAAI,CAACD,oBAAoB,GAAG,EAAE;;EAElC;CACD;AAtCYN,iBAAiB,GAAAwB,UAAA,EAL7B1B,SAAS,CAAC;EACT2B,QAAQ,EAAE,cAAc;EACxBC,WAAW,EAAE,2BAA2B;EACxCC,SAAS,EAAE,CAAC,0BAA0B;CACvC,CAAC,C,EACW3B,iBAAiB,CAsC7B;SAtCYA,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}